<!doctype html5>
<html>
    <head>
        <link rel="stylesheet" href="../../../static/css/app.css">
        <style type="text/css">
            html,
            body {
                font: 16pt arial;
            }

            #viz {
                width: 900px;
                height: 700px;
                border: 1px solid lightgray;
                font: 22pt arial;
                }
            </style>
        <!--script type="text/javascript" src="/Users/kyona/node_modules/neovis.js/dist/neovis.js"></script-->
        <!--script type="text/javascript">
            var viz;
            function draw() {
                var config = {
                    container_id: "viz",
                    server_url:"bolt://localhost:7687",
                    labels: {
                        "Categories": {
                            "caption":"category_name"
                            
                        },
                        "TECH_SITE": {
                            "caption":"title"
                        }
                    },
                    relationships: {
                        "Category_Rel": {  "thickness":"weight",
                        "caption":false
                        }
                    },
                    initial_cypher: "MATCH (n) MATCH (n)-[p]->(m) RETURN n,p,m "
                };
                viz= new NeoVis.default(config);
                viz.render();
                console.log(viz);
            }
            
        </script-->
    </head>
    <!--body onload=draw()>
        <div id=viz></div>
        {% if categories %}
        {% for i in categories %}
        <li><a href="{% url 'notes:category_detail' i.id %}">{{ i.category_name }}</a></li>
        {% endfor %}
        {% else %}
        <li>No Relationships</li>
        {% endif %}
        <li><a href="{% url 'notes:category_create' %}">create category</a></li>
    </body-->
    <body>
        <!---script>
            nodes = [
                {% for node in categories %}
                    {
                        id: ({{ forloop.counter|add:"-1" }}),
                        reflexive: {{ node.reflexive }},
                        feature: {{ node.category_name }},
                        links_from:
                        {% for link in node.parent_category %}
                            {% if link %}
                                {{ link }}
                            {% else %}
                                1
                            {% endif %}
                        {% endfor %}
                    },
                {% endfor %}
            ];
            // 全部ノードごとに検索していってそのノードのrelproからend_nodeを引っ張ってくる感じ方向性のは双方の場合だけ特殊に処理する感じ
            links = [
                { source: nodes[0], target: nodes[1], left: false, right: true },
                for (let node of nodes)
                    {source:node.links_from, target:node, left:, right:}
            ];
        </script-->
    </body>
    <script src="http://d3js.org/d3.v5.min.js"></script>
    <script src="https://unpkg.com/neo4j-driver"></script>
    <script src="../../../static/js/category_d3.js"></script>
</html>
